from socket import *
import time
import sys


s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)
s.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
s.bind(('0.0.0.0', 1127))
s.listen()

while 1:
    (c, info) = s.accept()
    print("accepted {0}".format(c))

    c.send(b'\xde\xad\xca\x75')
    x = c.recv(4)
    print("got x={0}".format(x))

    c.send(b'\x0a\x00\x00\x00')

    # li t0, 120; add a0, t0, 7; ret
    c.send(b'\x93\x02\x80\x07\x13\x85\x82\x00\x82\x80')

    c.close()


